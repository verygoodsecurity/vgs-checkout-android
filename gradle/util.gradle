ext.getLocalProperty = { propName ->
    getLocalProperty(propName)
}

def getLocalProperty(String propName) {
    def propsFile = rootProject.file('local.properties')
    if (propsFile.exists()) {
        def props = new Properties()
        props.load(new FileInputStream(propsFile))
        def value = props[propName]
        if (value == null) {
            return ""
        } else {
            return value
        }

    } else {
        return ""
    }
}

ext.getLocalProperties = {
    getLocalProperties()
}

static def getLocalProperties() {
    def properties = new Properties()
    def localPropertiesFile = new File('local.properties')
    if (localPropertiesFile.exists()) {
        properties.load(localPropertiesFile.newDataInputStream())
    } else {
        throw new GradleException("local.properties does not exists.")
    }
    return properties
}